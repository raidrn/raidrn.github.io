<html>

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Processing Demo</title>
      <script type="text/javascript" src="js/processing.js"></script>
      <link rel="stylesheet" href="/styles/style.css">
            
      <link rel="stylesheet" type="text/css" href="style.css">
                
      <link rel="shortcut icon" href="https://codehs.com/uploads/91969211844749ea05a8364258afeb34">
  </head>
  
  <body>
    
    <h1 style="color:#000000; font-size:250%; margin-top:2%;"><b>FLAPPY GHOST</b></h1>
    
    
    <header>
        <div>
            <nav><!Comment "The Navigation Bar"> 
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li><a href="gamer.html">Games</a></li>
                    <li><a href="web.html">Web Design</a></li>
                    <li><a class="turnon" href="mygame.html">Flappy Ghost</a></li>
                        
                </ul>
            </nav>
        </div>
    </header>
    <hr class="thick">
    <script type="text/processing">

     PImage bg, ghost, upPipe, downPipe; 
     int bgx, bgy, gx, gy, g, Vgy;
     int[] pipeX,pipeY; //DECLARE two arrays
     int gameRec, pipesPassed;
     
     void setup() {
      size(800, 800);
      bg = loadImage("./js/bg.png");
      ghost = loadImage("./js/ghost.png");
      downPipe = loadImage("./js/downPipe.png");  
      upPipe = loadImage("./js/upPipe.png");       
      gx = 100;
      gy = 50;
      g = 1; //Gravity == Speed of downward acceleration
      pipeX = new int[5];  //[0,0,0,0]
      pipeY = new int[pipeX.length];
      //POPULATE THE ARRAY WITH VALUES
      for(int i = 0; i < pipeX.length; i++){
        pipeX[i] = width + 200*i;
        pipeY[i] = (int)random(-200, 0);
      }  
      gameRec = -1;
    }
          
     //MAIN GAME LOOP
     void draw() {
      if(gameRec == -1)
      {
        startingPic();
      }
      else if(gameRec==0){
        bgd();
        conPipe();
        ghosti();
        pointCounter();
      }
      else{
        fill(255,0,0);
        textSize(70);
        text("Game Over", 200, 400);
      }
    }
    
     void pointCounter(){
      fill(255,165,0);
      textSize(32);
      text("Points: " + pipesPassed, width - 170, 40);  
    }
    
     void startingPic(){
      image(bg, 0, 0);
      textSize(40);
      fill(255,165,0);
      text("ðŸŽƒWelcome To Flappy GhostðŸŽƒ", 110, 300);
      text("Click to Begin!", 260, 400);
      if(mousePressed){
        gy = height/2;
        gameRec = 0;
      }
    }
    
     void conPipe(){
        for(int i = 0; i < pipeX.length; i++){
        image(upPipe, pipeX[i], pipeY[i]);
        image(downPipe, pipeX[i], pipeY[i] + 730);
        pipeX[i]-= 2;
          if(pipeX[i] < -200){
              pipeX[i] = width;
          }
          if(gx > (pipeX[i]-44) && gx < pipeX[i] + 93)
          {
            if(!(gy > pipeY[i] + 500 && gy < pipeY[i] + (500 + 230-45)))
            {
              gameRec = 1;
            }
            else if(gx==pipeX[i] || gx == pipeX[i] + 1){
              pipesPassed++;
            }
          }
        }
    }
    
     void ghosti() {
      image(ghost, gx, gy);
      gy = gy + Vgy;
      Vgy = Vgy + g;
      if(gy > height || gy < 0){
        fill(255);
        textSize(20);
        text("You went off the screen!!", 275, 450);
        gameRec=1;
      }
    }
    
     void mousePressed() { //Ghost Jump
      Vgy = -14;
    }
    
     void bgd() { //Background Image
      image(bg, bgx, bgy);
      image(bg, bgx + bg.width, bgy);
      bgx--; //Speed of the background
    
      if (bgx < -bg.width) {
        bgx = 0;    //If statement made to make background repeat till death
      }
    }
    </script>
    <canvas id="sketch" style="border: 5px solid black; margin-top:20px;"></canvas>
    
    <hr class="thick">
    <script type="text/processing">
     var myGrid;
     var numLines;// 'var' gets hoisted to the top while 'let' didn't
     var w;
     var snake;
     var apple,app,deathApp;
     var gameState;
     var score;
     var bg, bg2;
     
     function setup() {
      createCanvas(400, 400);
      frameRate(9);
      numLines = 20;
      myGrid = new Grid();
      w = width/numLines;
      snake = new Snake();
      apple = new Apple();
      deathApp = new DeathApp();
      app = new App();
      gameState = 0;
      score = -1;
      bg = color(255);
      bg2 = color(100);
     }
     
     function draw() {
      if(gameState == 0){
        backGround(bg,bg2);
        //myGrid.show();
        textSize(20);
        if(score == -1){
          strokeWeight(1);
          text("WELCOME TO SNAKE", 100 ,200);
          text("Click to Start", 150, 250);
        }
        snake.show();
        snake.move();
        if(snake.checkTail()){
          gameState = 1;
        }
        apple.show();
        eatApples();
        app.show();
        eatApp();
        deathApp.show();
        eatDeathApp();
      }else{
        fill(255,0,0)
        textSize(20);
        text("YOU DIED", 145, height/2);
        text("Press Enter to Play Again", 80, 250);
        noStroke();
       }
      fill(0);
      textSize(20);
      text("Points: " + score, 0, 17);
     }
     
     function backGround(){
      noFill();
      for (var f = 0; f < height; f++) {
        var inter = map(f, 0, height, 0, 1);
        var bg1 = lerpColor(bg, bg2, inter);
        stroke(bg1);
        line(0, f, width, f);
      }
     }
     
     function eatApples(){
      if(snake.x[0] == apple.x && snake.y[0] == apple.y){
        score++;
        apple = new Apple();
        snake.x.push(apple.x);
        snake.y.push(apple.y); 
        snake.eating = 0;
      }
     }
     
     function mousePressed(){ //Start Game
        score = 0;
     }
     
     function eatApp(){
      if(snake.x[0] == app.x && snake.y[0] == app.y){
        score++;
        app = new App();
        snake.x.push(app.x);
        snake.y.push(app.y);
        snake.eating = 0; 
      }
     }
     
     function eatDeathApp(){//BOMB
      if(snake.x[0] == deathApp.x && snake.y[0] == deathApp.y){
        score = 0;
        gameState = 1;
      }
     }
     
     class Grid{
      constructor(){
       this.w = width/numLines;
      }
      
      show(){
       stroke(0);
       for(var i = 0; i < numLines; i++){
         line(i*this.w, 0, i*this.w, height); // Vertical lines
         line(0,i*this.w, width, i*this.w); // Horizontial lines
       }
      }
     }
     
     class Apple{
      constructor(){
        this.x = int(random(numLines));
        this.y = int(random(numLines));
      }
      show(){
        fill(139,69,19);
        rect(this.x*w+w/2.5, this.y*w+w/-3, 2,15);
        fill(225,0,0);
        rect(this.x*w,this.y*w,w,w, 10); 
      }
     }
     
     class App{
      constructor(){
        this.x = int(random(numLines));
        this.y = int(random(numLines));
      }
      show(){
        fill(139,69,19);
        rect(this.x*w+w/2.5, this.y*w+w/-3, 2,15);
        fill(225,0,0);
        rect(this.x*w,this.y*w,w,w, 10); 
      }
     }
     
     class DeathApp{
      constructor(){
        this.x = int(random(numLines));
        this.y = int(random(numLines));
      }
      show(){
        fill(139,0,139);
        rect(this.x*w+w/2.5, this.y*w+w/-3, 2,15);
        fill(0,0,0);
        rect(this.x*w,this.y*w,w,w, 10); 
      }
     }

     
     function keyPressed(){
      if(keyCode==UP_ARROW && snake.dir != "DOWN"){
        snake.dir = "UP";
      }else if(keyCode==DOWN_ARROW && snake.dir != "UP"){
        snake.dir = "DOWN";
      }else if(keyCode==LEFT_ARROW && snake.dir != "RIGHT"){
        snake.dir = "LEFT";
      }else if(keyCode==RIGHT_ARROW && snake.dir != "LEFT"){
        snake.dir = "RIGHT";
      }else if(keyCode==ENTER){//RESTART GAME
        draw();
        setup();
      }
     }
     
     class Snake{
      constructor(){
        this.x = [];
        this.y = [];
        this.r = 100;
        this.g = 50;
        this.b = 100;
        this.d = w;
        this.x[0] = int(random(numLines));
        this.y[0] = int(random(numLines));
        this.dir = "";
        this.eating= 1;
      }
      show(){
        this.eating+=2;
        for(var i = 0; i < this.x.length; i++){ //Apple
          this.d = map(i, 0, this.x.length , w, 2*w/3);
          this.r = map(i, 0, this.x.length ,0, 255);
          fill(this.r,this.g,this.b);
          stroke(0,100,0);
          strokeWeight(3);
          rect(this.x[i]*w+(w/2-this.d/2), this.y[i]*w+(w/2-this.d/2), this.d, this.d,           w/6);
          if(i%2==0){
           fill(100,0,0); 
          }else{
            fill(0,0,100);
          }
          stroke(0,100,0);
          strokeWeight(3);
          noStroke();
          if(i <= 0){
          fill(255);
          ellipse(this.x[i]*w+5,this.y[i]*w+6,8,8);
          ellipse(this.x[i]*w+15,this.y[i]*w+6,8,8);//eyes
          fill(100);
          ellipse(this.x[i]*w+6,this.y[i]*w+6,4,4);//pupils
          ellipse(this.x[i]*w+14,this.y[i]*w+6,4,4);
          fill(0,0, 255);
          noStroke();
          ellipse(this.x[i]*w+10,this.y[i]*w-2,20,8);
          ellipse(this.x[i]*w+10,this.y[i]*w-6,10,15);//hat
          fill(255,0,0);
          noStroke();
          rect(this.x[i]*w+7.6,this.y[i]*w+15,5,12);//mouth
          }
          if(i == this.eating){
            fill(255,0,0);
            ellipse(this.x[i]*w+w/2, this.y[i]*w+w/2, 20, 20);
          }
        }
      }
      
      checkTail(){
        for(var i = 1; i < this.x.length; i++){
          if(this.x[0] == this.x[i] && this.y[0] == this.y[i]){
            return true;
          }
        }
        return false;   
      }
      move(){ 
        for(var i = this.x.length - 1; i > 0; i--){ //Makes the body & tail
            this.x[i] = this.x[i-1];
            this.y[i] = this.y[i-1];
        }
        
        switch(this.dir){
          case "UP":
            if(this.y[0]>0){
               this.y[0]--;
            }/*else{
              apple = new Apple();
              snake = new Snake();
            }*/
            break;
          case "DOWN":
            if(this.y[0]<numLines - 1){
             this.y[0]++;
            }/*else{
              apple = new Apple();
              snake = new Snake();
            }*/
            break;
          case "LEFT":
            if(this.x[0]>0){
             this.x[0]--;
            }/*else{
              apple = new Apple();
              snake = new Snake();
            }*/
            break;
          case "RIGHT":
            if(this.x[0]<numLines - 1){
             this.x[0]++;
            }/*else{
              apple = new Apple();
              snake = new Snake();
            }*/
            break;
        }
      }
     }

    </script>
    <canvas id="sketch" style="border: 5px solid black; margin-top:20px; margin-left:20px;"></canvas>
  </body>
  
  <footer>
    <div class="copyright">
        
                <p>Web Coding, CopyrightÂ© 2019</p>
        
    </div>
  </footer>
</html>
